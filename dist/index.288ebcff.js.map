{"mappings":"AAAA,MAAM,MAAM,SAAS,UAAU;IAC3B,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC,MAAM,CAAC,CAAC;QACd,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,KAAK;QACvB,IAAI,CAAC,eAAe,GAAG;YACnB,IAAI,EAAE;gBAAC,GAAG;AAAE,kBAAE;aAAC;YACf,MAAM,EAAE;gBAAC,GAAG;AAAE,iBAAC;aAAC;YAChB,MAAM,EAAE;gBAAC,GAAG;AAAE,kBAAE;aAAC;YACjB,OAAO,EAAE;gBAAC,GAAG;AAAE,iBAAC;aAAC;SACpB;KAEJ;IAED,MAAM,CAAC,KAAK,EAAE;QAEV,IAAI,CAAC,aAAa,EAAE;QACpB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;KAE3B;IAID,aAAa,GAAG;QACZ,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAAE;YAG7B,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC;YAC/D,IAAI,CAAC,QAAQ,CAAC,IAAI,MAAM;YAExB,IAAI,CAAC,kBAAkB,IAAI,CAAC;YAE5B,IAAI,IAAI,CAAC,kBAAkB,KAAK,CAAC,EAC7B,KAAK,CAAC,iBAAiB,CAAC,aAAa,EAAC;gBAClC,KAAK,EAAE,IAAI,CAAC,EAAE;aACjB,CAAC;SAGT;KACJ;IAED,YAAY,CAAC,KAAK,EAAE;QAChB,6CAA6C;QAC7C,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,kBAAkB,IAAI,CAAC,EAE/C,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,GAAC,IAAI,CAAC,SAAS,CAAC;QAErD,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAC3B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,GAAC,IAAI,CAAC,SAAS,CAAC;KAEvD;IAED,aAAa,CAAC,KAAK,EAAE,QAAQ,EAAE;QAC3B,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS;QAEnC,IAAI,QAAQ,CAAC,IAAI,KAAK,MAAM,EAAE;YAC1B,IAAI,KAAK,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,EACtD,OAAM;YAEV,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC;YACnD,IAAI,CAAC,kBAAkB,GAAG,EAAE;SAC/B;QAGD,IAAI,QAAQ,CAAC,IAAI,KAAK,OAAO,EAAE;YAC3B,IAAI,CAAC,UAAU,GAAG,IAAI;YACtB,UAAU,CAAC,IAAM;gBAEb,KAAK,CAAC,iBAAiB,CAAC,cAAc,EAAE;oBACpC,KAAK,EAAE,IAAI,CAAC,EAAE;iBACjB,CAAC;gBACF,IAAI,CAAC,UAAU,GAAG,KAAK;aAC1B,EAAE,QAAQ,CAAC,IAAI,CAAC;SAEpB;KAEJ;CACJ","sources":["Script/Person.js"],"sourcesContent":["class Person extends GameObject {\n    constructor(config) {\n        super(config);\n        this.moveProgressRemain = 0;\n        this.isStanding = false\n        this.directionUpdate = {\n            \"up\": [\"y\", -1],\n            \"down\": [\"y\", 1],\n            \"left\": [\"x\", -1],\n            \"right\": [\"x\", 1]\n        }\n        \n    }\n\n    update(state) {   \n       \n        this.updatePostion()\n        this.updateSprite(state)\n        \n    }\n\n    \n\n    updatePostion() {\n        if (this.moveProgressRemain > 0) {\n        \n            \n            const [proprety, change] = this.directionUpdate[this.direction]\n            this[proprety] += change\n            \n            this.moveProgressRemain -= 1\n\n            if (this.moveProgressRemain === 0) {          \n                utils.createCustomEvent(\"IFinishWalk\",{\n                    whoId: this.id\n                })\n\n            }\n        }\n    }\n\n    updateSprite(state) {\n        //Verifier si y'a toujours la bonne animation\n        if (!state.movInput && this.moveProgressRemain == 0) {\n            \n            this.sprite.setAnimation(\"stand-\"+this.direction)\n        }\n        if (this.moveProgressRemain > 0) {\n            this.sprite.setAnimation(\"walk-\"+this.direction)\n        }\n    }\n\n    startBehavior(state, behavior) {\n        this.direction = behavior.direction\n      \n        if (behavior.type === \"walk\") {\n            if (state.map.isSpaceTaken(this.x, this.y, this.direction)) {\n                return\n            }\n            state.map.moveWalls(this.x, this.y, this.direction)\n            this.moveProgressRemain = 16\n        }\n\n    \n        if (behavior.type === \"stand\") {\n            this.isStanding = true\n            setTimeout(() => {\n\n                utils.createCustomEvent(\"IFinishStand\", {\n                    whoId: this.id\n                })\n                this.isStanding = false\n            }, behavior.time)   \n            \n        }\n        \n    }\n}"],"names":[],"version":3,"file":"index.288ebcff.js.map","sourceRoot":"/__parcel_source_root/"}