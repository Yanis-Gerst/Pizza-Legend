{"mappings":"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","sources":["Script/KeyBoardMenu.js"],"sourcesContent":["class KeyboardMenu {\n    constructor(config = {}) {\n        this.options = []\n        this.up = null\n        this.down = null\n        this.prevFocus = null\n        this.descriptionsContainer = config.descriptionsContainer\n    }\n\n    setOptions(options) {\n        this.options = options    \n        this.element.innerHTML = this.options.map((options, index) => {\n            \n            const disableAttr = options.disable ? \"disabled\" : \"\"  \n            return (`\n                <div class=\"options\">\n                    <button ${disableAttr}  data-button=\"${index}\"  data-descriptions=\"${options.descriptions}\">\n                        ${options.label}\n                        <span class=\"right-side\"> ${options.right ? options.right() : \"\"}</span> \n                    </button>\n                </div>\n                \n            `)\n        }).join(\"\")\n\n        this.element.querySelectorAll(\"button\").forEach(button => {\n            button.addEventListener(\"click\", () => {\n                \n                const chosenOptions = this.options[Number(button.dataset.button)]\n                chosenOptions.handler()\n            })\n\n            button.addEventListener(\"mouseenter\", () => {\n                button.focus()\n            })\n\n            //Peut Ãªtre changer en sah\n            button.addEventListener(\"focus\", () => {\n                this.prevFocus = button\n                this.descriptionsElementText.textContent = button.dataset.descriptions\n            })\n        })\n\n        //Focus first Button we can\n\n        setTimeout(() => {\n            this.element.querySelector(\"button[data-button]:not([disabled])\")?.focus()\n        }, 10)\n\n    }\n    \n    createElement() {\n        this.element = document.createElement(\"div\")\n        this.element.classList.add(\"keyboard-menu\")\n\n        this.descriptionsElement = document.createElement(\"div\")\n        this.descriptionsElement.classList.add(\"descriptions-box\")\n        this.descriptionsElement.innerHTML = (`<p></p>`)\n        this.descriptionsElementText = this.descriptionsElement.querySelector(\"p\")\n\n       \n    }\n\n    init(container) {\n       \n        this.createElement() \n        let descContainer = this.descriptionsContainer || container\n        descContainer.appendChild(this.descriptionsElement)\n        container.appendChild(this.element)\n        \n\n        this.up = new KeyPressListener(\"z\", () => {\n            const currentButtonIndex = Number(this.prevFocus.dataset.button)\n            const prevButton = Array.from(this.element.querySelectorAll(\"button[data-button]\")).reverse().find(el => {\n                return el.dataset.button < currentButtonIndex && !el.disabled\n            })\n            prevButton?.focus()\n           \n        })\n\n        this.down = new KeyPressListener(\"s\", () => {         \n            const currentButtonIndex = Number(this.prevFocus.dataset.button)\n            const nextButton = Array.from(this.element.querySelectorAll(\"button[data-button]\")).find(el => {\n                return el.dataset.button > currentButtonIndex && !el.disabled\n            })     \n            nextButton?.focus()\n            \n        })\n    }\n\n    end() {\n        this.element.remove()\n        this.descriptionsElement.remove()\n        this.up.unbind()\n        this.down.unbind()\n    }\n}"],"names":[],"version":3,"file":"index.aa3cd298.js.map","sourceRoot":"/__parcel_source_root/"}